# Database_Systems-Assignment_1-2020-2021
JSON Database System Implementation using C .

**Ο φάκελος Datasets πρέπει να είναι μαζί μαι τη main**

compile :
  make

run :
  ./main Datasets 2013_camera_specs sigmod_large_labelled_dataset.csv
  
Τα αποτελέσματα βρίσκονται στο Output.csv στο main branch

Δομές :
- site_hash
  hash table με τα sites του Dataset
  Το collision επιλύνεται με λίστα. Έχουμε βάλει Default buckets num = 97
  
- id_hash
  Κάθε site bucket node έχει ένα hash table με το full_id ενός προϊόντος.
  Το κάθε full_id έχει ένα δείκτη σε μία κλίκα.
  
- complex
  Η δομή της κλίκας. Έχει ένα head και ένα tail σε μία λίστα με char* full_id
  Για κάθε ζευγάρι αλλάζουμε τους pointers head,tail του πρώτου id
  και διαγράφουμε τη κλίκα του δεύτερου.
  
- specs_list
  λίστα της οποίας τα node έχουν ένα attribute και μία λίστα από values

ενέργειες main :
  - Αρχικοποίηση δομών :
    Για κάθε φάκελο στο 2013_camera_specs κάνουμε insert στο site_hash.
    Για κάθε αρχείο στο current site κάνουμε insert στο current bucket node.
    Στη δεύτερη για κάθε full_id δημιουργούμε μία κλίκα με το ίδιο και 
    διαβάζουμε το .json για τα specs του
  
  - Αλλαγή κλικών :
    Για κάθε ζευγάρι γίνεται έλεγχος αν είναι ήδη στην ίδια κλίκα.
    κάνουμε free τον compPointer2, αλλάζουμε κατάλληλα τα head/tail
    και κάνουμε compPointer2 = compPointer1
    
  - print κλίκες :
    scanάρουμε τα hash tables. Για κάθε full_id βρίσκουμε τη θέση του στη κλίκα
    και εκτυπώνουμε στο Output.csv το ίδιο με κάθε full_id που ακολουθεί.



ΜΕΡΟΣ ΔΕΥΤΕΡΟ


compile:
	make

run:
	./main Datasets 2013_camera_specs sigmod_large_labelled_dataset.csv


Δομές:

-αρνητικές συσχετίσεις:
 λίστα, στο head κάθε κλίκας,της οποίας τα node έχουν δείκτη σε κλίκα.

-bag of words:
 δομή που περιέχει ένα hash table για τις λέξεις (dictionary) και έναν 
 διδιάστατο πίνακα ο οποίος ξεκινάει από το bag of words του κάθε αρχείου
 και το μετατρέπουμε σε πίνακα με τις τιμές idf για κάθε αρχείο.Για βελτιώσεις
 στο bag of words εκτός απο stopwords επιλέγουμε να μην κρατάμε και λέξεις που 
 εμφανίζονται μόνο μια φορά στο σύνολο των αρχείων καθώς και λέξεις με περισσότερους
 από 9 χαρακτήρες.

-model:
 δομη που περιέχει έναν πίνακα για τα βάρη και τις σταθερές(b και learning rate).
 Κάνουμε training ανά ένα ζευγάρι από το αρχείο training .


Ενέργεις main:

-Αρχικοποίηση δομών (βλ. ΜΈΡΟΣ ΠΡΏΤΟ)

-Αλλαγή κλικών (βλ. ΜΈΡΟΣ ΠΡΏΤΟ)

-Δημιουργία αρνητικών συσχετίσεων:
 αν βρούμε ζευγάρι με label 0 απλά κάνουμε append έναν κόμβο στην λίστα αρνητικών
 συσχετίσεων και των 2 κλικών που αντιστοιχούν στα προϊόντα του ζευγαριού με δείκτη 
 στην άλλη κλίκα.
 αν βρούμε ζευγάρι με label 1 (μεταβατικότητα αρνητικής συσχέτισης) για κάθε κλίκα στις
 αρνητικές συσχετίσεις της δεύτερης κλίκας του ζευγαριού,διαγράφουμε την αρνητική συσχέτιση
 με την δεύτερη κλίκα και την κάνουμε append στην πρώτη κλίκα.

-Δημιουργία αρχείων (train,validation,test):
 σκανάρουμε τα hash tables και για full_id βρίσκουμε τη θέση του στη κλίκα και εκτυπώνουμε στο 
 κατάλληλο αρχείο (ανάλογα με την πιθανότητα) το ίδιο με κάθε full_id που ακολουθεί.Το ίδιο κάνουμε
 και για τα αρνητικά ζευγάρια.

-Εκπαίδευση μοντέλου:
 για κάθε ζευγάρι που διαβάζουμε από το αρχείο training δημιουργούμε ένα vector (απόλυτη διαφορά των
 δύο vectors) και το κάνουμε train ανά ένα ζευγάρι.

-Έλεγχος μοντέλου:
 για κάθε ζευγάρι που διαβάζουμε από το αρχείο test,υπολογίζουμε την πιθανότητα να είναι ίδια προϊόντα
 και αναλόγως αυξάνουμε τον μετρητή που κρατάει τις επιτυχημένες προσπάθειες.Εκτυπώνουμε το ποσοστό επιτυχίας.
 